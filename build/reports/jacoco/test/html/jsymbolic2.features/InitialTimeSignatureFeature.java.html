<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>InitialTimeSignatureFeature.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jSymbolic2</a> &gt; <a href="index.source.html" class="el_package">jsymbolic2.features</a> &gt; <span class="el_source">InitialTimeSignatureFeature.java</span></div><h1>InitialTimeSignatureFeature.java</h1><pre class="source lang-java linenums">package jsymbolic2.features;

import jsymbolic2.featureutils.Feature;
import java.util.LinkedList;
import javax.sound.midi.*;
import ace.datatypes.FeatureDefinition;
import jsymbolic2.featureutils.MIDIFeatureExtractor;
import jsymbolic2.processing.MIDIIntermediateRepresentations;

/**
 * A feature vector consisting of two values. The first is the numerator of the first specified time signature
 * in the piece, and the second is the denominator of the same time signature. Set to 4/4 if no time signature
 * is specified.
 *
 * @author Cory McKay
 */
<span class="fc" id="L17">public class InitialTimeSignatureFeature implements Feature {</span>

    /**
     * {@inheritDoc}
     */
    @Override()
    public int getDimensions() {
<span class="fc" id="L24">        return 2;</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override()
    public String getName() {
<span class="fc" id="L32">        return &quot;Initial Time Signature&quot;;</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override()
    public String getCode() {
<span class="fc" id="L40">        return &quot;R-1&quot;;</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override()
    public String getDescription() {
<span class="fc" id="L48">        return &quot;A feature vector consisting of two values. The first is the numerator of the first specified time signature in the piece, and the second is the denominator of the same time signature. Set to 4/4 if no time signature is specified.&quot;;</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override()
    public double[] extractFeature(Sequence sequence, MIDIIntermediateRepresentations sequence_info, double[][] other_feature_values) throws Exception {
<span class="fc" id="L56">        double[] result = null;</span>
<span class="pc bpc" id="L57" title="1 of 2 branches missed.">        if (sequence_info != null) {</span>
<span class="fc" id="L58">            result = new double[2];</span>
<span class="pc bpc" id="L59" title="1 of 2 branches missed.">            if (((LinkedList) sequence_info.overall_metadata[1]).isEmpty()) {</span>
<span class="nc" id="L60">                result[0] = 4.0;</span>
<span class="nc" id="L61">                result[1] = 4.0;</span>
            } else {
<span class="fc" id="L63">                Object[] numerators_objects = ((LinkedList) sequence_info.overall_metadata[1]).toArray();</span>
<span class="fc" id="L64">                double[] numerators = new double[numerators_objects.length];</span>
<span class="fc bfc" id="L65" title="All 2 branches covered.">                for (int i = 0; i &lt; numerators.length; i++) numerators[i] = ((Integer) numerators_objects[i]).doubleValue();</span>
<span class="fc" id="L66">                Object[] denominators_objects = ((LinkedList) sequence_info.overall_metadata[2]).toArray();</span>
<span class="fc" id="L67">                double[] denominators = new double[denominators_objects.length];</span>
<span class="fc bfc" id="L68" title="All 2 branches covered.">                for (int i = 0; i &lt; denominators.length; i++) denominators[i] = ((Integer) denominators_objects[i]).doubleValue();</span>
<span class="fc" id="L69">                result[0] = numerators[0];</span>
<span class="fc" id="L70">                result[1] = denominators[0];</span>
            }
        }
<span class="fc" id="L73">        return result;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>