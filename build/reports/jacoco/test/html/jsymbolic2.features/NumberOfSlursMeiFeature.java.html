<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NumberOfSlursMeiFeature.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jSymbolic2</a> &gt; <a href="index.source.html" class="el_package">jsymbolic2.features</a> &gt; <span class="el_source">NumberOfSlursMeiFeature.java</span></div><h1>NumberOfSlursMeiFeature.java</h1><pre class="source lang-java linenums">package jsymbolic2.features;

import ace.datatypes.FeatureDefinition;
import jsymbolic2.featureutils.MEIFeatureExtractor;
import jsymbolic2.processing.MIDIIntermediateRepresentations;
import org.ddmal.jmei2midi.meielements.meispecific.MeiSpecificStorage;
import javax.sound.midi.Sequence;

/**
 * A feature calculator that The total number of notes marked with slurs in the piece (i.e. the number of
 * notes indicated as notes with slurs in the MEI encoding) divided by the total number of pitched notes in
 * the music.
 *
 * &lt;p&gt;Since this is an MEI-specific feature, the feature information is obtained from the
 * {@link MeiSpecificStorage} class. The associated code can be found
 * &lt;a href=&quot;https://github.com/DDMAL/jMei2Midi&quot;&gt;jMei2Midi&lt;/a&gt;, which is included as a dependency of
 * jSymbolic.&lt;/p&gt;
 *
 * @author Tristano Tenaglia and Cory McKay
 */
public class NumberOfSlursMeiFeature extends MEIFeatureExtractor {

    /* CONSTRUCTOR ******************************************************************************************/
    /**
     * Basic constructor that sets the values of the fields inherited from this class' superclass.
     */
<span class="fc" id="L27">    public NumberOfSlursMeiFeature() {</span>
<span class="fc" id="L28">        code = &quot;S-2&quot;;</span>
<span class="fc" id="L29">        String name = &quot;Number of Slurs&quot;;</span>
<span class="fc" id="L30">        String description = &quot;The total number of notes marked with slurs in the piece (i.e. the number of notes indicated as notes with slurs in the MEI encoding) divided by the total number of pitched notes in the music.&quot;;</span>
<span class="fc" id="L31">        boolean is_sequential = true;</span>
<span class="fc" id="L32">        int dimensions = 1;</span>
<span class="fc" id="L33">        definition = new FeatureDefinition(name, description, is_sequential, dimensions);</span>
<span class="fc" id="L34">        dependencies = null;</span>
<span class="fc" id="L35">        offsets = null;</span>
<span class="fc" id="L36">    }</span>

    /* PUBLIC METHODS ***************************************************************************************/
    /**
     * {@inheritDoc}
     */
    @Override
    public double[] extractMEIFeature(MeiSpecificStorage meiSpecificStorage, Sequence sequence, MIDIIntermediateRepresentations sequence_info, double[][] other_feature_values) throws Exception {
        double value;
<span class="pc bpc" id="L45" title="1 of 2 branches missed.">        if (null != sequence_info) {</span>
<span class="fc" id="L46">            double total_number_pitched_note_ons = sequence_info.total_number_pitched_note_ons;</span>
<span class="fc" id="L47">            double number_of_slur_notes = meiSpecificStorage.getSlurNoteList().size();</span>
<span class="pc bpc" id="L48" title="2 of 4 branches missed.">            if (0.0 == total_number_pitched_note_ons || 0.0 == number_of_slur_notes)</span>
<span class="nc" id="L49">                value = 0.0;</span>
            else
<span class="fc" id="L51">                value = number_of_slur_notes / total_number_pitched_note_ons;</span>
<span class="fc" id="L52">        } else</span>
<span class="nc" id="L53">            value = -1.0;</span>
<span class="fc" id="L54">        double[] result = new double[1];</span>
<span class="fc" id="L55">        result[0] = value;</span>
<span class="fc" id="L56">        return result;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>